const zx = @import("zx");

const backend = @import("backend");

const Error = @import("../../components/error.zx").Error;

pub fn Page(ctx: zx.PageContext) zx.Component {
    const name = ctx.request.param("name") orelse @panic("unreachable?");

    return (
        <div @allocator={ctx.allocator}>
            {if (backend.fetch(ctx.arena, name)) |stats| (
                <>
                    Found {stats.card_count} new {name} cards in {stats.ms_elapsed}ms
                </>
            ) else |e| (
                <>
                    Error trying to update {name} cards: <Error {e} />
                </>
            )}
        </div>
    );
}
